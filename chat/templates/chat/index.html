{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<link rel="shortcut icon" href="{%  static 'blog/images/logo.png' %}">
	<title>CS TecLog Chat Rooms</title>
	<link rel="stylesheet" type="text/css" href="{% static 'chat/css/lobby_style.css' %}" />
</head>
<body>
	{% if user.is_authenticated %}
		<h1>Welcome to the chat lobby {{request.user.username}}!</h1>
		<p>Which chat room would you like to enter?</p>
		<input id="room-name-input" type="text" size="50"/><br/>
		<input id="room-name-submit" type="button" value="Enter"/>

		<script>
			document.querySelector('#room-name-input').focus();
			document.querySelector('#room-name-input').onkeyup = function(keypress) {
				if (keypress.keyCode === 13) {	// if the user presses enter or return
					document.querySelector('#room-name-submit').click();
				}
			};

			document.querySelector('#room-name-submit').onclick = function(keypress) {
				var roomName = document.querySelector('#room-name-input').value;
				window.location.pathname = '/chat/' + roomName + '/';
			};
		</script>
	{% else %}
		<p>You need to login first
		<button class="btn btn-default"><a href="{% url 'login' %}?next={{ request.path }}">Login</a></button>
		Or
		<button class="btn btn-default"><a href="{% url 'users:register' %}?next={{ request.path }}">Signup</a></button>
		</p>
	{% endif %}
</body>
</html>